<div class="page-container">
  <div class="page-header">
    <div>
      <h1 class="page-title">Prijavljeni problemi</h1>
      <p class="page-subheader">Pregled i upravljanje prijavama u sistemu</p>
    </div>
  </div>

  <div class="content-card">
    <mat-tab-group animationDuration="200ms">
      <mat-tab label="Prijavljeni materijali">
        <div class="tab-content">
          <app-base-table
            [displayedColumns]="[
              'id',
              'materialName',
              'reason',
              'reporterName',
              'reporterSurname',
              'time',
              'actions'
            ]"
            [retrieveDataFunction]="retrieveMaterials"
            [filterDataFunction]="retrieveMaterials"
            [deleteDataFunction]="deleteReportedProblem"
            [viewDetailsFunction]="deleteReportedMaterial"
            [actionButtons]="['delete', 'details']"
            [headerMap]="{
              id: 'ID',
              materialName: 'Naziv materijala',
              reason: 'Razlog prijave',
              reporterName: 'Ime prijavljivača',
              reporterSurname: 'Prezime prijavljivača',
              time: 'Datum prijave',
              entityName: 'Prijava'
            }"
            [dateColumns]="['time']"
          ></app-base-table>
        </div>
      </mat-tab>

      <mat-tab label="Prijavljeni komentari">
        <div class="tab-content">
          <app-base-table
            [displayedColumns]="[
              'id',
              'reviewText',
              'reason',
              'reporterName',
              'reporterSurname',
              'time',
              'actions'
            ]"
            [retrieveDataFunction]="retrieveComments"
            [filterDataFunction]="retrieveComments"
            [deleteDataFunction]="deleteReportedProblem"
            [actionButtons]="['delete', 'details']"
            [viewDetailsFunction]="deleteReportedComment"
            [headerMap]="{
              id: 'ID',
              reviewText: 'Tekst komentara',
              reason: 'Razlog prijave',
              reporterName: 'Ime prijavljivača',
              reporterSurname: 'Prezime prijavljivača',
              time: 'Datum prijave',
              entityName: 'Prijava'
            }"
            [dateColumns]="['time']"
          ></app-base-table>
        </div>
      </mat-tab>

      <mat-tab label="Prijavljeni nalozi">
        <div class="tab-content">
          <app-base-table
            [displayedColumns]="[
              'id',
              'reportedName',
              'reportedSurname',
              'reporterName',
              'reporterSurename',
              'reason',
              'time',
              'actions'
            ]"
            [retrieveDataFunction]="retrieveAccounts"
            [filterDataFunction]="retrieveAccounts"
            [deleteDataFunction]="deleteReportedProblem"
            [viewDetailsFunction]="suspendReportedUser"
            [actionButtons]="['delete', 'details']"
            [headerMap]="{
              id: 'ID',
              reportedName: 'Ime prijavljenog',
              reportedSurname: 'Prezime prijavljenog',
              reason: 'Razlog prijave',
              reporterName: 'Ime prijavljivača',
              reporterSurename: 'Prezime prijavljivača',
              time: 'Datum prijave',
              entityName: 'Prijava'
            }"
            [dateColumns]="['time']"
          ></app-base-table>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
